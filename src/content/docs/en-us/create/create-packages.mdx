---
order: 20
xref: create-packages
title: Creating Packages
description: How to create Chocolatey packages.
---
import Callout from '@choco/components/Callout.astro';
import Iframe from '@choco/components/Iframe.astro';
import Xref from '@components/Xref.astro';

Before you start, ensure you understand <Xref title="what Chocolatey Packages are" value="getting-started" anchor="what-are-chocolatey-packages" />.

Run `choco new -h` to get a feel for what you can pass e.g `choco new bob` (to create a package named `bob`). Once you have the new templated package, you can follow the information on this page to update the files and create your Chocolatey package.

## Quick Start Guide

If you think you got what it takes and just want to know the basic steps to create a Chocolatey package, please see the <Xref title="Quick Start Guide" value="create-packages-quick-start" />.

## How do I Create Packages?

There are three components of a Chocolatey package:

1. [Package metadata file (`.nuspec`)](#package-metadata-nuspec-file). (**Required**).
1. <Xref title="chocolateyInstall.ps1" value="package-scripts" /> script which does the installation and upgrading of your package. See the <Xref title="Chocolatey PowerShell functions reference" value="powershell-reference" /> for more information on PowerShell functions and cmdlets that can be used.
1. Files to include such as the software installer, registry key or license files, standalone executable binaries, etc. Ensure you have <Xref title="distribution rights if your package is for the Chocolatey Community Repository" value="legal" />.
1. `chocolateyUninstall.ps1` script which uninstalls your package. See the <Xref title="Chocolatey PowerShell reference" value="powershell-reference" /> for more information on PowerShell functions and cmdlets that can be used.

For more information, read our comprehensive <Xref title="packaging documentation" value="package-creation" />, our [back-to-basics blog post on Creating Chocolatey Packages, Step-By-Step, the Easy Way!](https://blog.chocolatey.org/2024/03/creating-chocolatey-packages-step-by-step) or, watch the YouTube livestream:

<Iframe ratio="16x9" link="https://www.youtube.com/embed/2VRK2RQ3-Ao" title=" Creating Chocolatey Packages, Step-By-Step, the Easy Way!
Creating Chocolatey Packages, Step-By-Step, the Easy Way!" />

## Internationalization and Localization of Packages

For Chocolatey, internationalization and localization of packages is very important, because it has users from all over the world. Many applications support multiple languages, but they use several different methods to achieve that. Therefore, there is no standard how internationalization/localization has to be integrated into packages. However, here are a few examples of packages that use various techniques. You can use them as inspiration for new packages:

* The ideal situation is when an application determines the user's system language and automatically installs with that language. Then you don't have to take any action relating to localization, because the application already handles that. Examples of such applications are [VLC Media Player](https://community.chocolatey.org/packages/vlc) and [LibreOffice](https://community.chocolatey.org/packages/libreoffice).
* When an application provides different installers for different languages, you should determine the system language and download the appropriate installer. The package for [Mozilla Firefox](https://community.chocolatey.org/packages/Firefox) ([source code](https://github.com/chocolatey-community/chocolatey-packages/tree/master/automatic/Firefox)) uses this method.
* Sometimes an application installer or executable has already integrated all supported languages, but doesn't automatically select the system language during a silent install. Often you can pass an additional install parameter to select the desired language. This is used for example in the [CCleaner](https://community.chocolatey.org/packages/ccleaner) package ([source code](https://github.com/tonigellida/chocolateyautomaticpackages/tree/master/ccleaner)).
* Some application use separate language files which must be downloaded separately and put somewhere in the application directory. It is best when you create a separate package for the language files. If your package id is `packageid`, then call it `packageid-langfiles`. The [language files package for KeePass](https://community.chocolatey.org/packages/keepass-langfiles) is an example how this can be achieved.

## Package Metadata `.nuspec` File

<Callout type="warning">
    <Xref title="Additional rules apply" value="create-packages-for-ccr" /> if you are creating packages for the [Chocolatey Community Repository](https://community.chocolatey.org).
</Callout>

See the documentation on the contents of the <Xref title="package metadata" value="package-metadata" />

## How do I Create a New Package?

See our documentation on how to <Xref title="package anything with Chocolatey CLI" value="package-anything" />.

## Package Scripts

### Package Installation

<Xref title="Installing a package" value="choco-command-install" /> is achieved using a <Xref title="Chocolatey package script" value="package-scripts" />: `chocolateyInstall.ps1`.

#### Installation Paths

When you create a package, you decide where it will be installed or extracted to. Depending on the <Xref title="type of application" value="faqs" anchor="what-distinction-does-chocolatey-make-between-an-installable-and-a-portable-application" />, there are a couple of suitable locations (not listed in any particular order):

1. **The default installation path**. The software author probably had a good reason for choosing a specific installation path. If the end-user should be able to customize this path and you, the package maintainer, know how to pass a custom path to the installer, then you should add a <Xref title="package parameter" value="parse-package-parameters" />.
2. **The Chocolatey package directory**. You can install or extract to the package directory `$env:ChocolateyInstall\lib\<PACKAGENAME>`. This allows Chocolatey to automatically find executables and put those on `PATH`.
3. **Path provided by the `Get-ToolsLocation` <Xref title="Chocolatey PowerShell function" value="get-toolslocation" />**. Using `Get-ToolsLocation` gives the end-user a way of controlling where packages are installed. If you want to allow customizing the installation path, then this is a good way to go.

### Package Upgrade

<Xref title="Upgrading a package" value="choco-command-upgrade" /> is achieved using a <Xref title="Chocolatey package script" value="package-scripts" />: `chocolateyBeforeModify.ps1`.

### Package Uninstallation

<Xref title="Uninstalling a package" value="choco-command-uninstall" /> is achieved using a <Xref title="Chocolatey package script" value="package-scripts" />: `chocolateyUninstall.ps1`. All the usual <Xref title="helper reference" value="powershell-reference" /> are available.

<a name="when-will-my-custom-scripts-be-run"></a>
### When Do Package Scripts Run?

See the documentation on <Xref title="package scripts" value="package-scripts" />.

## Package Content

Include the Software installer in the package, sometimes called embedding the binaries. The <Xref title="package scripts" value="package-scripts" /> can use <Xref title="Chocolatey provided PowerShell" value="powershell-reference" /> that will use the installers directly from the package instead of downloading first. This makes for the most reliable and deterministic packages, but ensure you have the <Xref title="legal right to distribute" value="legal" /> the software first if publishing to a public location (like the [Chocolatey Community Repository](https://community.chocolatey.org)).

### Avoid Folders Named "content"

Do not use a folder named `content` in your package. NuGet attaches a special meaning to this folder and will not allow you to have dependencies on packages that have content folders without also having a content folder.

## Package Dependencies

You can make <Xref title="packages that depend on other packages" value="package-dependencies" /> just by adding those dependencies to the package metadata `.nuspec` file.

<a name="how-do-i-exclude-executables-from-getting-shims"></a>
<a name="how-do-i-set-up-batch-redirects-for-applications-that-have-a-gui"></a>
## Automatically Adding Executables to the PATH Using Shims

See the <Xref title="documentation on shimming" value="shim" />.

## Build Your Package

The <Xref title="pack command" value="choco-command-pack" /> is used to build a package. From the directory where the `.nuspec` you created is, and run `choco pack`. That's it.

## Testing Your Package

<Callout type="info">
    We strongly suggest the following should be performed in a virtual machine and not on your computer.
</Callout>

<Callout type="info">
    Testing your package can be done using the [Chocolatey Test Environment](https://github.com/chocolatey-community/chocolatey-test-environment). This is the same environment used by <Xref title="Package Verifier" value="package-verifier-service" />, used on the [Chocolatey Community Repository](https://community.chocolatey.org).
</Callout>

To test the package you just built, navigate to the directory where the newly built Chocolatey package `.nupkg` file is, and run:

```powershell
choco install <PACKAGENAME> --debug --verbose --source .
```

Where:

- `<PACKAGENAME>` is the name of the package you built.
- The `.` after `--source` uses the current directory. You can specify multiple directories separated by a semicolon, for example `--source "'.;c:\package\temp'"`.

This will install the package from the folder it was created in. As you find things you may need to fix, using `--force` (`-f`) will remove and reinstall the package from the updated Chocolatey package. If you are specifically testing `chocolateyBeforeModify.ps1`, you need to be testing upgrade and uninstall scenarios. You need to install a version of the package with this file **first** as the `chocolateyBeforeModify.ps1` script runs from the installed package, not the package you are installing (like `chocolateyInstall.ps1` does).

<Callout type="info">
    Using Force `--force` (`-f`) should only be done in subsequent testing where you are reinstalling the same package that you've changed and should not be used in regular use scenarios. It should definitely not be in scripts.
</Callout>

<Callout type="info">
    If you are using a Semver dash in your package version (such as `1.0.0-beta`), you will need to use the `--pre` option or you will get **Unable to find package** errors. You can also specify the exact version with the `--version 1.0.0-beta` option.
</Callout>

When your package metadata `.nuspec` file specifies dependencies that are not in your local folder, you should add their paths to the `--source`. For example, for dependencies specified like this in the package:E.g. in the case of Chocolatey itself:

```xml
<dependencies>
    <dependency id="chocolatey" version="2.0.0" />
</dependencies>
```

You'll need to append the Chocolatey Community Repository API path like so:
`--source "'.;https://community.chocolatey.org/api/v2/'"` (note the double quotes bookending the apostrophes here, use `%cd%` in cmd.exe or `$pwd` in Powershell.exe if `.` doesn't resolve). See <Xref title="passing options with quotes" value="choco-commands" anchor="how-to-pass-options-switches" />.

## Push Your Package

To push your package after you have built and tested it, you type `choco push <PACKAGE .NUPKG FILE> --source <PACKAGE REPOSITORY> --api-key <PACKAGE REPOSITORY API KEY>` where:

1. `<PACKAGE .NUPKG FILE> is the file name of the Chocolatey package `.nupkg` file that was built.
1. `<PACKAGE REPOSITORY>` is the source URL of your package repository you want to push to (for example, `--source "'https://push.chocolatey.org/'"` for the Chocolatey Community Repository). As of Chocolatey CLI v2.0.0, you can set the `defaultPushSource` configuration value if you frequently push packages to the same source. For example: `choco config set --name defaultPushSource --value https://push.chocolatey.org/`.
1. `<PACKAGE REPOSITORY API KEY>` is the API key for the source URL. Alternatively you can <Xref title="add that key permanently" value="choco-command-apikey" /> using the `choco apikey` command.

For more information, see the <Xref title="documentation" value="choco-command-push" /> for the `choco push` command.

## Automatic Packaging

See the <Xref title="Automatic Packaging documentation" value="automatic-packaging" /> for more information.
