---
order: 20
xref: sync-command
title: Choco Sync Command (C4B)
description: Use choco sync to bring already installed applications under Chocolatey management
---
import Callout from '@choco/components/Callout.astro';
import Iframe from '@choco/components/Iframe.astro';
import Xref from '@components/Xref.astro';

## Sync Command

Chocolatey is aware of, and manages, Chocolatey packages. What about your existing software, installed prior to your use of Chocolatey? How do you track and manage those items over time?

Package Synchronizer, available in Chocolatey For Business, inspects Programs and Features and attempts to generate Chocolatey packaging for every item not currently under management of Chocolatey.

Sync looks at all software that is in Programs and Features that is not being managed with Chocolatey packages and brings them under management. This means you can run one command and suddenly, all of the software installed on a machine is under management by Chocolatey!

### Usage

#### View software available to sync

To see what programs are able to be synchronized use the following:

###### Chocolatey v2.x and newer

```powershell
choco list --include-programs
```

###### Chocolatey v1.x and older

```powershell
choco list --local-only --include-programs
```

<Callout type="info">
  The sync command will create a folder for each package it creates inside a `sync` folder in the directory from which the sync command is executed.
  It is recommended you use a known, clean directory when running the sync command to make things a little easier to find afterwords.
  The packaging folders can then be checked into source control, where you can manage the packages over time.
</Callout>
#### Sync all unmanaged applications

To sync all unmanaged software using default package ids, run the following:

```powershell
choco sync
```

#### Sync an individual application

It is possible to sync a specific application to Chocolatey using the following command line where `--id` is the name of the application exactly as shown in Programs and Features, and `--package-id` is the name you wish to give the Chocolatey package to track and manage the application over time 

```powershell
choco sync --id='Application DisplayName' --package-id='choco-package-id'
```

<Callout type="warning">
  If you intend to leverage [Package Internalizer]() you will want the Chocolatey package id as it exists on the Chocolatey Community Repository, allowing for automated updates to the package.
</Callout>

#### Scripting Package Internalizer

If you are like us, you want to automate as much of your job as you can. All of Chocolatey's features lend themselves very well to automation, and Sync is no exception. Below is a PowerShell function you can
use in your environment to make leveraging Package Synchronizer a cinch!

```powershell
function Sync-Package {
    <#
    .SYNOPSIS
    Runs choco sync on a system

    .DESCRIPTION
    Run choco sync against a system with eiher a single item or from a map

    .PARAMETER Id
    The Package id for the synced package

    .PARAMETER DisplayName
    The Diplay Name From Programs and Features

    .PARAMETER Map
    A hashtable of DisplayName and PackageIds

    .EXAMPLE
    Sync-Package

    Sync everything from Programs and Features not under Chocolatey management

    .EXAMPLE
    Sync-Package -Id googlechrome -DisplayName 'Google Chrome'

    Sync the Google Chrome application from Programs and Features to the googlechrome package id

    .EXAMPLE
    Sync-Package -Map @{'Google Chrome' = 'googlechrome'}

    Sync from a hashtable of DisplayName:PackageId pairs

    .NOTES
    Requires a Chocolatey For Business license
    #>
    [CmdletBinding(DefaultParameterSetName = 'Default')]
    Param(
        [Parameter(Mandatory, ParameterSetName = 'Package')]
        [String]
        $Id,

        [Parameter(Mandatory, ParameterSetName = 'Package')]
        [String]
        $DisplayName,

        [Parameter(Mandatory, ParameterSetName = 'Map')]
        [hashtable]
        $Map,

        [Parameter(ParameterSetName = 'Default')]
        [Parameter(ParameterSetName = 'Map')]
        [Parameter(ParameterSetName = 'Package')]
        [String]
        $OutputDirectory = $PWD
    )

    end {
        switch ($PSCmdlet.ParameterSetName) {
            'Package' {
                choco sync --id="$DisplayName" --package-id="$Id" --output-directory="$OutputDirectory"
                $packageFolder = Join-path $OutputDirectory -ChildPath "sync\$Id"
                $todo = Join-Path $packageFolder -ChildPath 'TODO.txt'

                if (Test-Path $todo) {
                    Write-Warning (Get-Content $todo)
                }
            }

            'Map' {
                $map.GetEnumerator() | Foreach-Object {
                    choco sync --id="$($_.Key)" --package-id="$($_.Value)" --output-directory="$OutputDirectory"
                    $packageFolder = Join-path $OutputDirectory -ChildPath $_.Value
                    $todo = Join-Path $packageFolder -ChildPath 'TODO.txt'

                    if (Test-Path $todo) {
                        Write-Warning (Get-Content $todo)
                    }
                }
            }

            default {
                choco sync --output-directory="$OutputDirectory"
            }
        }
    }
}

```

### See it in action

Want to see for yourself how Simple bringing existing software into Chocolatey can be? We've got you!

<Iframe ratio="16x9" link="https://www.youtube.com/watch?v=MG98KS__5C8" title="Sync in Action" />

<Callout type="info">
    To see all feature videos for Chocolatey for Business, please visit https://chocolatey.org/resources/features#c4b.
</Callout>

### Options and Switches

The following are available in the <Xref title="choco sync" value="choco-command-sync" /> command.

```
     --id=VALUE
     Id - The Display Name from Programs and Features

     --out, --outdir, --outputdirectory, --output-directory=VALUE
     OutputDirectory - Specifies the directory for the generated Chocolatey
       package file(s). If not specified, uses a subdirectory of the current
       directory.
```

### FAQ

#### How do I take advantage of this feature?

You must have the [business edition of Chocolatey](https://chocolatey.org/pricing). Business editions are great for organizations that need to manage the total software management lifecycle.

#### I'm a business customer, now what?

You would periodically run `choco sync`.

#### How does it work?

Chocolatey takes a look at all software in Programs and Features that is not under Chocolatey management, generates packages on the fly and baselines them under the Chocolatey install, ensuring all of the links are tracked.

#### Do I get the packages to add to source?

Yes! Chocolatey will tell you the location of the sync files so you can put them into source control.

#### Some packages have a TODO list

Generating packages on the fly from Programs and Features for non-MSI installers doesn't provide everything necessary to ensure an actual install. So when you take those packages back to source, you will need to finish out the packaging for those so that later when you upgrade, things will work appropriately.

#### How do I get machine parseable output?

Use `-r`. `choco sync -r`.

#### What if I have an existing package that is just not tracking to Programs and Features?

Synchronize can recognize existing packages and sync to those as long as the name of the package is a close match to the software name (e.g. Google Chrome becomes either google-chrome or googlechrome).

### Sync Command Known issues

* Any packages you've installed side by side (`-m`) will show up every time during sync.
* If you have both a 64-bit and 32-bit version of some software installed, sync will track to one on the first run and the other on the next run. This is not a normal scenario.